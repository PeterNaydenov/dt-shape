var dtShape=function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=2)}([function(e,t,r){"use strict";const s=r(3);let n,o;function l(){const e=Object.create(o),t=Object.create(n);return t.value=e,t.structure={root:"object"},t.namespace={root:[]},t._select=[],t._error=[],t}function c(e){let t=Object.create(o);if(e){let r=Object.keys(e),s=r.map(e=>e.includes("root")?e:`root/${e}`);t=r.reduce((r,n,o)=>(t[s[o]]=e[n],r),t)}return t}let u={init(e,t){let r,s;return s=void 0===e?l():u.scan(e),r=t?i._transform(s,t):s},load(e){if(!e.namespace||!e.structure){const t=(e=c(e)).build();e=u.scan(t)}return e._select=[],e},loadFast(e){let t=l();return t.value=e,t},scan(e){let t=l();t.structure.root=s.folderKind(e),t.namespace.root=[];let r=[{target:e,namespace:"root",dt:t}],n=!1;for(;!n;)0==(r=r.reduce((e,t)=>{let r=i._scan(t);return e=e.concat(r)},[])).length&&(n=!0);return t},preprocess(e,t){const r=t(u.scan(e).value);return u.scan(a.build.call(r))},add(e,t){let r,n,o,l=this;return r=u._detectDT(e),n=t?i._transform(r,t):r,(o=s.getIterator(n.value)).forEach(e=>{if(!l.value.hasOwnProperty(e)){n.value[e];const t=s.getPenult(e),r=s.removeLast(e),o=n.structure[r];l.value[e]=n.value[e],l.namespace.hasOwnProperty(t)||(l.namespace[t]=[]),l.namespace[t].push(e),l.structure.hasOwnProperty(r)||(l.structure[r]=o)}}),l},_detectDT(e){const t=e.value&&e.structure&&e._error,r=!!t||Object.keys(e)[0].includes("root");return t?e:r?u.load(e):u.scan(e)},update(e,t){let r,n,o,l=this;return r=u._detectDT(e),n=t?i._transform(r,t):r,(o=s.getIterator(n.value)).forEach(e=>{if(l.value.hasOwnProperty(e)){n.value[e],s.getPenult(e);const t=s.removeLast(e);n.structure[t];l.value[e]=n.value[e]}}),l},overwrite(e,t){let r,n,o,l=this;return r=u._detectDT(e),n=t?i._transform(r,t):r,(o=s.getIterator(n.value)).forEach(e=>{const t=l.value.hasOwnProperty(e);if(l.value[e]=n.value[e],!t){const t=s.getPenult(e),r=s.removeLast(e),o=n.structure[r];l.namespace.hasOwnProperty(t)||(l.namespace[t]=[]),l.namespace[t].push(e),l.structure.hasOwnProperty(r)||(l.structure[r]=o)}}),l},insert(e,t){let r,n,o=this,l=o.namespace[t];return s.notObject(e)&&(e=[e]),l?((n=(r=c(e)).valueList()).forEach(e=>{let r=l.length,s="root"==t?`root/${r}`:`root/${t}/${r}`;o.value[s]=e,o.namespace[t].push(s)}),o):(o._error.push(`Insert error: Namespace "${t}" does not exists. Data failed to insert: ${JSON.stringify(e)}`),o)},identical(e,t){let r=this.value;const n=s.getIterator(e),o=s.getIterator(r);return t(n.reduce((t,s)=>o.includes(s)?r[s]!=e[s]?t:(t[s]=e[s],t):t,c())),this},change(e,t){let r=this.value;const n=s.getIterator(r);return t(s.getIterator(e).reduce((t,s)=>n.includes(s)?r[s]==e[s]?t:(t[s]=e[s],t):t,c())),this},same(e,t){let r=this.value;const n=s.getIterator(e),o=s.getIterator(r);return t(n.reduce((t,r)=>o.includes(r)?(t[r]=e[r],t):t,c())),this},different(e,t){let r=this.value;const n=s.getIterator(r);return t(s.getIterator(e).reduce((t,r)=>n.includes(r)?t:(t[r]=e[r],t),c())),this},missing(e,t){let r=this.value;const n=s.getIterator(r),o=s.getIterator(e);return t(n.reduce((e,t)=>o.includes(t)?e:(e[t]=r[t],e),c())),this},errorLog(e){return e(this._error),this},select:function(){return this._select=[],this},spread(e,t){const r=this;let s;switch(e){case"value":case"values":s=r._select.reduce((e,t,s)=>(e["root/"+s]=r.value[t],e),c());break;case"st":{let e=r._select.reduce((e,t)=>(e[t]=r.value[t],e),c());s=a.build(e)}break;case"asJSON":{let e=r._select.reduce((e,t)=>(e[t]=r.value[t],e),{});s=JSON.stringify(e)}break;case"toJSON":{let e=r._select.reduce((e,t)=>(e[t]=r.value[t],e),c());s=JSON.stringify(e.build())}break;case"key":case"keys":s=r._select.reduce((e,t,r)=>(e[`root/${r}`]=t.replace("root/",""),e),c());break;case"dt":case"object":default:s=r._select.reduce((e,t)=>(e[t]=r.value[t],e),c())}return t(s),r},spreadAll(e,t){return this.select().all().spread(e,t)},invert(){const e=this._select,t=s.getIterator(this.value);return this._select=t.reduce((t,r)=>(e.includes(r)||t.push(r),t),[]),this},folder(e,t){let r;t=null==t?9999:t,t+=1,r=(e=e||"root").split("/").length+t;let n=s.getIterator(this.value).filter(t=>t.match(e)).reduce((e,t)=>{return t.split("/").length<=r&&e.push(t),e},[]);return this._select=this._select.concat(n),this},parent(e,t){const r=this;let n,o;o=r._select,r._select=[],r.folder(e);let l=r._select.reduce((e,t)=>{let r=s.removeLast(t);return e.includes(r)?e:(e.push(r),e)},[]);return t&&(l=l.reduce((e,n)=>{r._select=[],r.folder(n,0);let o=r._select.reduce((e,t)=>{let n=s.getUlt(t),o=r.value[t];return e[n]=o,e},{});return t(o)&&e.push(n),e},[])),n=l.reduce((e,t)=>(r._select=[],r.folder(t),e.concat(r._select)),[]),r._select=o.concat(n),r},remove(e){const t=this;return void 0===e?t:(t._select=t._select.reduce((r,s)=>(e(t.value[s],s)||r.push(s),r),[]),t)},keep(e){const t=this;return void 0===e?t:(t._select=t._select.reduce((r,s)=>(e(t.value[s],s)&&r.push(s),r),[]),t)},limit(e){return this._select=this._select.slice(0,e),this},deep(e,t){const r=this._select.map(e=>e.split("/").length);let s;return t||(t="less"),"more"==t?(s=t=>r[t]>e,e+=1):(s=t=>r[t]<e,e+=3),this._select=this._select.reduce((e,t,r)=>(s(r)&&e.push(t),e),[]),this},space(e){const t=this;null==e&&(e=["root"]),"string"==typeof e&&(e=[e]);let r=e.reduce((e,r)=>{let s=t.namespace;return s.hasOwnProperty(r)&&(e=e.concat(s[r])),e},[]);return 0==!r.length&&(t._select=t._select.concat(r)),t},block:e=>(function(){const t=this,r=t.structure,n=t.value,o=s.getIterator(r),l=s.getIterator(n),c=e;let u=[];const a=i._reorder(o).reduce((e,t)=>{let s=!1;return r[t]==c&&(s=e.every(e=>!e.includes(t))),s&&e.push(t),e},[]);return 0==!(u=l.reduce((e,t)=>{let r=!a.every(e=>!t.includes(e));if(r){let e=!1;a.forEach(s=>{if(!e&&t.includes(s)){const n=s.split("/").length+1,o=t.split("/").length;r=o==n,e=!0}})}return r&&e.push(t),e},[])).length&&(t._select=t._select.concat(u)),t})},a={map(e){let t=this;return t.keyList().reduce((r,s,n)=>{let o=e(s,n);return"string"!=typeof o&&(o=s),0!=o.indexOf("root/")&&(o=`root/${o}`),r[o]=t[s],r},c())},assemble(){let e,t,r,n=this,o=s.getIterator(n);return 0==o.length?n:(e=o.map(e=>e.split("/")).map(e=>(e.shift(),e)),e=i._reorder(e),t=e.map(e=>n["root/"+e.join("/")]),e=i._removeDuplicates(e),(e=i._ignore(e)).forEach(e=>e.unshift("root")),r=(e=e.map(e=>e.join("/"))).reduce((e,r,s)=>(e[r]=t[s],e),c()))},keyList(){return Object.getOwnPropertyNames(this)},valueList(){return Object.getOwnPropertyNames(this).map(e=>this[e])},ignoreKeys(e){const t=this,r=t.keyList();let s=(e||0)+1,n=[],o=c();return r.forEach(e=>{let r=e.split("/"),l=r[s];n.includes(l)||n.push(l),r[s]=n.length-1,o[r.join("/")]=t[e]}),o},cut(e){if("number"!=typeof e)return this;return this.modifyKeys(t=>`root/${function e(t,r){let s=t.indexOf("/");return-1==s?r=0:r--,r<1?t.substring(s+1):e(t.substring(s+1),r)}(t,e+1)}`)},modifyKeys(e){const t=this;return s.getIterator(t).reduce((r,s,n)=>{const o=t[s];return r[e(s)]=o,r},c())},keepKeys(e){const t=this;let r,s;return"function"!=typeof e?t:s=(r=Object.getOwnPropertyNames(t)).reduce((r,s)=>{let n=s.split("/");return e(n)&&(r[s]=t[s]),r},c())},removeKeys(e){const t=this;let r,s;return"function"!=typeof e?t:s=(r=Object.getOwnPropertyNames(t)).reduce((r,s)=>{let n=s.split("/");return e(n)||(r[s]=t[s]),r},c())},keepValues(e){const t=this;let r,s;return"function"!=typeof e?t:s=(r=t.keyList()).reduce((r,s)=>{return e(t[s])&&(r[s]=t[s]),r},c())},removeValues(e){const t=this;let r,s;return"function"!=typeof e?t:s=(r=t.keyList()).reduce((r,s)=>{return e(t[s])||(r[s]=t[s]),r},c())},json(){return JSON.stringify(this)},file(){const e=this;return e.keyList().reduce((t,r)=>{let s=r.split("/").reduce((e,t)=>"root"==t?e:isNaN(parseInt(t))?e+`/${t}`:e,"root");return t.push(`${s}/${e[r]}`),t},[])},keyValue(e){const t=this,r=e||"";t.keyList();let s,n=t.keyList();return s=n.map((e,r)=>`${e} ${t[n[r]]}`).join(`${r} `)+r},list(){const e=this,t=s.getIterator(e);let r,n=0;const o=t.reduce((e,t)=>{let r=s.removeLast(t);return null==e[r]&&(e[r]=n++),e},{});return r=t.reduce((t,r)=>{const n=s.removeLast(r),l=s.getUlt(r);return t[`root/${o[n]}/${l}`]=e[r],t},c())},build(e){return e||(e=this),i._build(e)}},i={_build(e){const t=Object.keys(e).map(e=>e.split("/"));let r={},s=[],n=[];return t.forEach(e=>{const t=e[0];1!=e.length&&(s.includes(t)||s.push(t))}),t.forEach(e=>{n.includes(e[0])||n.push(e[0])}),!isNaN(n[0])&&(r=[]),s.forEach(s=>{let n=[],o=t.reduce((e,t)=>t[0]!=s?e:(e.includes(t[1])||e.push(t[1]),e),[]);o.every(e=>{const t=parseInt(e);isNaN(t)&&(n={})}),r=o.reduce((r,n)=>{const o=`${s}/${n}`,l=e[o],c="boolean"==typeof l||null!=l;let u=t.reduce((t,r)=>{if(2==r.length)return t;return r.join("/").includes(o)?(t[r.slice(1).join("/")]=e[r.join("/")],t):t},{});return r[n]=c?l:i._build(u),r},n)}),r},_toFolderFile(e){let t,r=[],s=[],n=[];return e.forEach(e=>{let t=e.split("/").pop(),o=e.replace(`/${t}`,"");r.forEach(e=>{o.includes(e)&&!s.includes(e)&&(s.push(e),n.push(0))}),r.includes(o)||r.push(o)}),t=e.reduce((e,t)=>{let r=t.split("/").pop(),o=t.replace(`/${r}`,""),l=s.findIndex(e=>e==o);return l>-1?e[`${o}/${n[l]++}`]=r:e[o]=r,e},c())},_scan(e){let{target:t,namespace:r,dt:n}=e;return s.getIterator(t).reduce((e,o)=>{let l=s.notObject(t[o]),c=`${r}/${o}`;if(l){n.value[c]=t[o];const l=s.getUlt(r);return n.namespace[l].push(c),e}{n.structure[c]=s.folderKind(t[o]),n.namespace.hasOwnProperty(o)||(n.namespace[o]=[]);let r={target:t[o],namespace:c,dt:n};return e.push(r),e}},[])},_transform(e,t){let r,n=e.value;switch(t){case"reverse":r=n.keyList().reduce((t,r)=>{return t[e.value[r]]=r,t},{});break;case"key":case"keys":{let e=n.keyList().reduce((e,t)=>(e[t]=t.replace("root/",""),e),{});r=a.build(e)}break;case"value":case"values":const o=i._toFolderFile(n.valueList().map(e=>`root/${e}`)),l=s.getIterator(o).reduce((e,t)=>{let r=o[t];return e[!isNaN(parseInt(r))?`${t}/0`:`${t}/${r}`]=r,e},{});r=a.build(l);break;case"file":case"files":case"folders":case"folder":r=i._toFolderFile(n.valueList().map(e=>`root/${e}`)).build();break;default:r={}}return e=u.scan(r)},_removeDuplicates(e){let t,r,s;return 1==e[0].length?e:(t=e.map(e=>e[0]),r=t[0],(s=t.every(e=>e==r))&&(e.forEach(e=>e.shift()),i._removeDuplicates(e)),e)},_reorder(e,t){let r=[];t=t||0;let s=e.reduce((e,t)=>t.length>e?t.length:e,0);return t>s?e:(e.reduce((e,r)=>{if(r.length-1==t)return e;if(!r[t])return e;return e.every(e=>e!=r[t])&&e.push(r[t]),e},[]).forEach(s=>{e.forEach(e=>{e[t]==s&&r.push(e)})}),e.forEach(e=>{r.every(t=>t!=e)&&r.push(e)}),t++,i._reorder(r,t))},_ignore(e){let t,r,n,o=0;return e=s.copy(e),r=e.map(e=>e.pop()),t=(t=e.map(e=>{if(0==e.length)return e;let t=e.join("");return isNaN(t)?[e.join("_")]:[e.join("")]})).map((e,t)=>e.concat(r[t])),n=t[0][0],t=t.map(e=>(e[0]!=n&&(n=e[0],o++),isNaN(e[0])||(e[0]=o),e))}};o={assemble:a.assemble,ignoreKeys:a.ignoreKeys,cut:a.cut,keyList:a.keyList,valueList:a.valueList,list:a.list,map:a.map,json:a.json,file:a.file,keyValue:a.keyValue,build:a.build,modifyKeys:a.modifyKeys,keepKeys:a.keepKeys,removeKeys:a.removeKeys,keepValues:a.keepValues,removeValues:a.removeValues},n={init:u.init,load:u.load,loadFast:u.loadFast,preprocess:u.preprocess,add:u.add,update:u.update,insert:u.insert,overwrite:u.overwrite,spread:u.spread,spreadAll:u.spreadAll,log:u.errorLog,empty:()=>Object.create(o),identical:u.identical,change:u.change,same:u.same,different:u.different,missing:u.missing,select:u.select,parent:u.parent,folder:u.folder,all:u.folder,space:u.space,deepArray:u.block("array"),deepObject:u.block("object"),invert:u.invert,limit:u.limit,keep:u.keep,remove:u.remove,deep:u.deep},e.exports=n},function(e,t,r){"use strict";const s={getIterator:e=>Object.getOwnPropertyNames(e),getType:function(e){let t=!1;return null==e&&(t="undefined"),"string"==typeof e&&(t="string"),"number"==typeof e&&(t="number"),"boolean"==typeof e&&(t="boolean"),"function"==typeof e&&(t="function"),!1===t&&(t="object"),t},length:e=>Object.keys(e).length};e.exports=s},function(e,t,r){"use strict";let s=r(0),n=r(4),o=r(1);function l(e,t){let r;return Object.keys(e).every(e=>!e.includes(t))?r=e:s.loadFast(e).select().folder(t).invert().spread("dt",e=>r=e),r}function c(e,t){let r;return r=o.getIterator(t).reduce((r,s)=>{let c,u=o.length;if(s.includes("!")){let o,a=s.split("!"),i=a[0],p=a[1];switch(o={data:e,search:t[s],prefix:p},i){case"fold":c=n.fold(o);break;case"list":c=n.list(o);break;case"load":c=n.load(o)}0!==u(c)&&(r=l(r,p),r=Object.assign(r,c))}else 0!==u(c=t[s].reduce((t,r)=>(e[`root/${r}`]&&(t[`root/${s}`]=e[`root/${r}`]),t),{}))&&(r=l(r,s),r=Object.assign(r,c));return r},s.empty())}c.getDTtoolbox=()=>s,e.exports=c},function(e,t,r){"use strict";const s={notObject:function(e){let t=!1;return null==e&&(t=!0),"string"==typeof e&&(t=!0),"number"==typeof e&&(t=!0),"boolean"==typeof e&&(t=!0),"function"==typeof e&&(t=!0),t},isObject:e=>!s.notObject(e),copy:e=>JSON.parse(JSON.stringify(e)),folderKind:e=>e instanceof Array?"array":"object",getIterator:e=>Object.keys(e),removeLast(e){let t=e.split("/");return t.pop(),t.join("/")},getPenult(e){let t=e.split("/");return t.pop(),t.pop()},getUlt:e=>e.split("/").pop()};e.exports=s},function(e,t,r){"use strict";const s=r(0),n=r(1),o={fold(e){let t;const r=e.data,n=e.prefix;return t=e.search.reduce((e,t)=>{let o;return s.load(r).select().folder(t).spread("dt",e=>{o=e.assemble().map(e=>e.replace("root",`${n}`))}),Object.assign(e,o)},{})},list(e){let t;const r=e.data,n=e.prefix;return t=e.search.reduce((e,t)=>{let o;return s.load(r).select().folder(t).spread("dt",e=>{o=e.assemble().map((e,t)=>e.replace(e,`${n}/${t}`))}),Object.assign(e,o)},{})},load(e){let t={};e.data;const r=e.prefix;return e.search.forEach(e=>{let o=n.getType(e);if("function"===o&&(e=e(),o=n.getType(e)),"undefined"!==o)if("object"===o)t=s.init(e).value.map(e=>e.replace("root",r));else{let n={};n[r]=e,t=s.init(n).value}}),t}};e.exports=o}]);